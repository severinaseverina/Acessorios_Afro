{% extends '_template.html' %}

{% block conteudo %}

<h2>Editar perfil</h2>

<p>Os dados do seu perfil estão abaixo. Altere somente os dados necessários.</p>
<p><em>ATENÇÃO! Ao editar seus dados, será necessário fazer login novamente!</em></p>

<form action="/editaperfil" method="post" id="formEditaPerfil">

    <p>
        <label for="nome">
            Nome:
            <span class="field-help" title="Seu nome completo ou nome social."><i class="fa-solid fa-circle-question"></i></span>
        </label>
        <input type="text" name="nome" id="nome" required minlength="3" value="{{ form.u_nome }}">
    </p>

    <p>
        <label for="nascimento">
            Nascimento:
            <span class="field-help" title="Sua data de nascimento no formato 'dd/mm/aaaa'."><i class="fa-solid fa-circle-question"></i></span>
        </label>
        <input type="date" name="nascimento" id="nascimento" required value="{{ form.u_nascimento }}">
    </p>

    <p>
        <label for="email">
            E-mail:
            <span class="field-help" title="Seu melhor endereço de e-mail."><i class="fa-solid fa-circle-question"></i></span>
        </label>
        <input type="email" name="email" id="email" required value="{{ form.u_email }}">
    </p>

    <p>
        <label for="senha1">
            Senha atual (opcional):
            <span class="field-help" title="A senha deve ter pelo menos 8 caracteres incluindo: maiúculas, minúsculas, números e caracteres especiais."><i class="fa-solid fa-circle-question"></i></span>
        </label>
        <span class="input-password">
            <input type="password" id="senha1" name="senha1" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="A senha deve ter pelo menos 8 caracteres incluindo: maiúculas, minúsculas, números e caracteres especiais." required>
            <span id="toggleSenha1"><i id="toggleIcone1" class="fa-solid fa-eye fa-fw"></i></span>
        </span>
    </p>

    <hr>
    <p>Altere o campo abaixo somente se deseja alterar sua senha.</p>

    <p>
        <label for="senha2">
            Nova senha (opcional):
            <span class="field-help" title="Preencha somente se for trocar a senha. A nova senha deve ter pelo menos 8 caracteres incluindo: maiúculas, minúsculas, números e caracteres especiais."><i class="fa-solid fa-circle-question"></i></span>
        </label>
        <span class="input-password">
            <input type="password" id="senha2" name="senha2" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="A senha deve ter pelo menos 8 caracteres incluindo: maiúculas, minúsculas, números e caracteres especiais.">
            <span id="toggleSenha2"><i id="toggleIcone2" class="fa-solid fa-eye fa-fw"></i></span>
        </span>
    </p>

    <p>
        <button type="submit">Salvar</button>
    </p>

</form>

<script>
    toggleSenha1.addEventListener('click', (e) => {
        if (senha1.type == 'password') {
            senha1.type = 'text'
            toggleIcone1.classList.remove('fa-eye')
            toggleIcone1.classList.add('fa-eye-slash')
        } else {
            senha1.type = 'password'
            toggleIcone1.classList.remove('fa-eye-slask')
            toggleIcone1.classList.add('fa-eye')
        }
    })
    toggleSenha2.addEventListener('click', (e) => {
        if (senha2.type == 'password') {
            senha2.type = 'text'
            toggleIcone2.classList.remove('fa-eye')
            toggleIcone2.classList.add('fa-eye-slash')
        } else {
            senha2.type = 'password'
            toggleIcone2.classList.remove('fa-eye-slask')
            toggleIcone2.classList.add('fa-eye')
        }
    })

</script>

{% endblock %}